\section{Chapter Overview}
This chapter consists of the design decisions made to come up with a suitable architecture for implementation, based on the gathered requirements. High-level design, low-level design, design diagrams, UI wireframes have been used to convey how the design goals are expected to be achieved while discussing the reasoning for chosen design decisions.

\section{Design Goals}
% check non-functional requirements as well
% \setlength{\abovecaptionskip}{2pt plus 3pt minus 1pt} % Chosen fairly arbitrarily

\vspace{-4mm}       % remove line spacing after

% \begin{longtable}{|l|p{0.80\linewidth}|}
% \caption{Design Goals of the proposed system} \\
% \hline
% \textbf{Design Goal} & \textbf{Description} \\
% \hline
% \hline
% \end{longtable}

\begin{table}[h!]
\caption{Design Goals of the proposed system}
{\setstretch{1.5} 
\begin{tabular}{|l|p{0.81\linewidth}|}
\hline
\textbf{Design Goal} & \textbf{Description}\\
\hline
Performance & The recommendations matrix \& opinion-mining data can be pre-processed and stored in-memory to be used for recommendations. Since ensembled models are expected to be utilized, concurrency would be ideal to get the output from multiple models at the same time. This could cut down the processing time by 4-5 times (based on the number of models that are required to provide recommendations for the given input). \\ 
\hline
Correctness & The correctness \& quality of the output should be of the highest possible level, utilizing all the available data. By explaining why a user is getting the proposed recommendation will ensure that the user isn't mislead into wrong purchase decisions. \\ 
\hline
Usability & Since the purpose of the system is to automate and make it easy for the user to explore \gls{nft}s, the usability of the system must be easy for users of all levels of expertise. \\ 
\hline
Scalability & The system may have to support many concurrent user-requests in a production environment. The backend should be able to handle this. New data should be able to be added to the system with minimum effort. \\
\hline
Adaptability & Since the utilized Recommendation models may have to be altered based on the available data and user-requirements in the future, these models should be able to be easily swapped out for new models while ensuring that the system won't break in the process of upgrading, with minimum changes. \\
\hline
\end{tabular}
}
\end{table}

\section{High-Level Design}
% High-Level Design / System Architecture Design


\subsection{Tiered Architecture}

The system's architecture is depicted in the diagram below. The data, logic, and presentation layers are organized in a three-tier architecture.

The research contribution in this system lies in data preprocessing of the \textit{data tier}, recommendations models and in the recommendations diversifier of the \textit{logic tier}.

% drawio file: https://drive.google.com/file/d/1w8qtT_7XMVVc8TiNLongVLBngfqhQPMg/view?usp=sharing

\begin{figure}[h!]
\centering
\frame{\includegraphics[width=\textwidth]{images/Design/tired-architecture-diagram.png}}
\caption{Three Tiered Architecture \textit{(self-composed)}}
\label{fig:three-tiered-architecuture}
\end{figure}

While the entire architecture is represented in a modular approach for ease of understanding, several backend services are expected to work together in the fashion of a distributed microservices architecture when it comes to implementating the proposed architecture.

The reason for following a microservices architecture is to allow the system to scale while ensuring that points of failure can be easily recognized and taken care of seperately. The distributed nature of the system is expected to be seen in the connection between the numerous Recommendations Models and the Recommendations Diversifier. These combined together through output-pipelines, will act as an Ensebled Recommendations System. Although the system will be capable of distributing the load at this point, the expectation with the prototype is to run this in a single machine.

\noindent The purpose of each module that is represented in the above architecture are described below.

% \begin{enumerate}
% \item Data Tier
\subsubsection{Data Tier}
\begin{enumerate}
    \item Smart Contract Data - Data that is retrieved from Blockchain Smart Contracts. For convenience purposes, the data is fetched from the OpenSea API. Contains all the available data of each \gls{nft}.
    \begin{enumerate}
        \item \gls{nft} Asset Data - All the content of each \gls{nft}.
        \item \gls{nft} Sales Events Data - Past sales data from \gls{nft} trading.
        \item \gls{nft} Bids Events Data - All the current bids of each \gls{nft}.  % might not be used for the prototype.
    \end{enumerate}
    \item Social Trends Data - Data gathered from social trends sites (Twitter, news sites, etc.)
    \item Anonymous past user-bias preference Data - Each user's preferred bias stored anonymously. This can be identified by a user's selection based on their requirement or based on the feedback received for each recommendation. This can be a temporary data-store that can be cleared once the user-session has ended.
\end{enumerate}

% \item Logic Tier
\subsubsection{Logic Tier}
\begin{enumerate}
    \item Data Preprocessors - The preprocessing code required to modify/ extract required data that is usable for recommendations from all the available data.
    \begin{enumerate}
        \item \gls{nlp} Data parser - Responsible for extracting all the required data from what was collected through data mining techniques.
        \item \gls{nft} Data Preprocessor - Used to modify and separate data that can be utilized from smart contracts and processed trends data.
    \end{enumerate}
    \item Recommendations Models - The various models that are used to provide recommendations based on identified diverse data-points.
    % \begin{enumerate}
    %     \item Trends Based Recommender - 
    %     \item Content Based Recommender - 
    %     \item Traits Based Recommender - 
    %     \item Total-rarity Based Recommender - 
    %     \item Contract - Clustering Based Recommender - 
    %     \item Price Prediction Recommender - 
    % \end{enumerate}
    \item Recommendations Diversifier - The module that combines the recommendations produced by all the Recommendations Models, considering the bias.
    \item User Satisfaction Monitor - The feedback received by user's will be filtered and updated through this module, to update the moving bias while preserving user-anonymity,
    \item Recommendations Evaluator - The module that evaluates the user's satisfaction with the recommendations produced, to separately identify under-performing \& high-performing models.
    \item Progress Polling API - The web-polling API that will be used to update the progress of recommendations generation in the frontend.
    \item Backend Proxy - The interface that exposes the backend services to the frontend.
\end{enumerate}

% \item Presentation Tier (Client Tier)
\subsubsection{Presentation Tier (Client Tier)}
\begin{enumerate}
    \item User Input \& Options Wizard - The UI that is presented to the user to enter the desired \gls{nft}(s) to be considered to recommendations as well as desired parameters and data-points (for advanced users).
    \item Recommendations Feed UI - The UI that will show all the recommendations generated for a user. This will be similar to a home page on Youtube/ any other social network.
    \item \gls{nft} Item UI - The UI that will show a chosen \gls{nft} with it's data and explained recommendations.
    \item Admin Options \& Stats UI - The UI that will be exposed to a system Admin, allowing him to view the stats such as the general bias of the system. This will have options to defined the data-sources to be used for trends based recommendations and to adjust the bias.
\end{enumerate}
% \end{enumerate}



% \subsection{Component Diagram}
% Is this necessary? no - this is for OOAD

% \begin{figure}[h!]
% \centering
% \frame{\includegraphics[width=\textwidth]{images/Design/component-diagram.png}}
% \caption{Component Diagram \textit{(self-composed)}}
% \label{fig:component-diagram}
% \end{figure}

\section{System Design}
% Low-Level Design / System Design
\subsection{Choice of the Design Paradigm}
% SSADM seems to be the most suitable for this project- give reasons
Although the author was very tempted to use OOAD (Object Oriented Analysis and Design) to build the prototype due to the ease of extendability and further development of the system, the decision was made to use \textbf{SSADM (Structured Systems Analysis and Design Method)} based on the following factors.
\begin{itemize}
\item The project's core research component being inclined towards Data science. Therefore, it doesn't gain a noticeable benefit by using Object Oriented approaches.
\item The programming languages that are expected to be used for implementation don't support OOP by nature.
\item Ease of implementation of a MVP (Minimum Viable Product) for demonstrating the research application using the prototype.
\item The time constraint of having to implement \& document a research within the time span of 10 months.
\end{itemize}


% \subsection{Design Diagrams}
% (component / class / sequence) - if OOP
% Any diagram that is relevant according to your choice of paradigm.

\subsection{Data Flow Diagram}

The Data Flow Diagram presented below provides a more extensive breakdown of the components of the Context Diagram that was presented in the SRS.
% https://www.lucidchart.com/pages/data-flow-diagram
% drawio file: https://drive.google.com/file/d/1XFBAVPGVhEBqQPh0X6YoGenb3icNOS3I/view?usp=sharing

\begin{figure}[h!]
\centering
\setlength{\fboxsep}{10pt}%
\setlength{\fboxrule}{0.5pt}%
\fbox{\includegraphics[width=0.95\textwidth]{images/Design/Data Flow Diagram L1.png}}
% https://tex.stackexchange.com/a/423679
\caption{Data Flow Diagram - Level 1\textit{(self-composed)}}
\label{fig:data-flow-diagram-l1}
\end{figure}

% Add a L2 Data flow diagram, if there's space left

\subsection{Algorithm Design}


\subsection{UI Design}
% low fidelity wireframes

\pagebreak
\subsection{System Process Flow Chart}
The algorithm's flow and decision structures are depicted in the flowchart below. It explains a significant proportion of the system since the expected implementation is primarily procedural.

% might have to show this page in landscape orientation
\begin{figure}[h!]
\centering
\setlength{\fboxsep}{10pt}%
\setlength{\fboxrule}{0.5pt}%
\fbox{\includegraphics[width=0.95\textwidth]{images/Design/System Process Flow Chart.png}}
\caption{System Process Flow Chart\textit{(self-composed)}}
\label{fig:system-process-flowchart}
\end{figure}

% TODO: add price prediction, evaluation & bias altering based on feedback to flow chart

\section{Chapter Summary}
The design, architectural aspects and the flow of the project were documented in this chapter followed by the expected UI wireframes to be implemented for the end-user's interaction with the system.
